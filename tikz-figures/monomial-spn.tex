\documentclass{standalone}
\input{tex-macros/tikz-standalone}
\begin{document}
\begin{tikzpicture}
  \def\arrowlength{2em}
  \def\branchwidth{2em}
  \def\sboxw{2em}
  \def\sboxh{\sboxw}
  \def\linw{2em}
  \def\rcdist{1em}
  \def\rcinc{1.5em}
  \def\oplusr{0.5em}
  \newcounter{branchnumber}
  \setcounter{branchnumber}{3}
  \edef\b{\arabic{branchnumber}}

  \foreach \i in {1,...,\b} {
    \node (x\i) at (0,{-(\i)*\branchwidth}) {$X_{\i}$};
    \draw[->] (x\i) --  +(\arrowlength,0) coordinate (s\i);
    \draw[rounded corners]
    ($(s\i) + (0,-0.5*\sboxh)$) rectangle node (sbox\i) {$x^\alpha$}
    ($(s\i) + (\sboxw,0.5*\sboxh)$);
    \draw[->] ($(s\i) + (\sboxw,0)$) -- +(\arrowlength,0)
    coordinate (m\i);
    \draw[->] (m\i) ++(\linw,0) -- +(\i*\rcinc,0) coordinate (rc\i);
    \coordinate[oplus=\oplusr, anchor=west] (xor\i) at (rc\i);
    \draw[->] ($(xor\i) + (0,{(\i-1)*\branchwidth + \rcdist})$)
    node[anchor=south] {$r_{\i}$} -- (xor\i.north);
    \draw[->] (xor\i.east) -- +({(\b - \i) * \rcinc + \rcdist},0);
  }

  \coordinate (mcorner1) at ($(sbox1.north -| m1)$);
  \coordinate (mcorner2) at ($(sbox\b.south -| {$(m\b) + (\linw,0)$})$);
  \draw[rounded corners] (mcorner1) rectangle node {$M$} (mcorner2);
\end{tikzpicture}
\end{document}
